<!DOCTYPE html>
<html lang="en">
<head>
    {% include head.html %}

    <!-- My Scripts -->
    <script src="js/NN.js"></script>
    <script src="../../NN/js/NN.js"></script> <!--TODO : to remove -->
</head>

<body>
{% include nav.html %}
<main role="main" class="container" style="max-width: 95%">
    <h1>RÃ©seau neuronnal</h1>
    <div class="container" style="float:left;">
        <div>
            <canvas id="can" width="280" height="280" style="top:10%;left:10%;border:2px solid; cursor:crosshair"></canvas>
        </div>

        <div class="container">
            <div style="padding-bottom:5px;"><input type="checkbox" id="preprocessing"><span style="margin-left:5px;">Display Preprocessing</span></div>
            <div style="padding-bottom:5px;"><input type="checkbox" id="scaleStrokeWidth" checked="true"><span style="margin-left:5px;">Scale Stroke Width</span></div>
            <div style="float:left;padding-right:10px;"><input type="button" value="clear" id="clr" size="23" onclick="erase()"></div>
            <div style="float:left;"><input type="button" value="recognize" id="recognize" size="23" onclick="recognize()"></div>
            <div id="nnInput"></div>
        </div>
        <br><br>
        <div>
            <canvas id="network" width="784" height="40" style="top:10%;left:10%;border:2px solid;"></canvas>
        </div>

        <script>
            var canvas = document.getElementById("network");
            var ctxNetwork = canvas.getContext("2d");

            var w = 784;
            function drawFirstLayer(data) {
                let size = 1;
                for (let i = 0; i < data.length; i++) {
                    let curData = data[i];
                    // [-1, 1] = [blanc, noir]
                    let lightVal = 100 - 50*(curData +1);
                    ctxNetwork.fillStyle = "hsl(0,0%," + lightVal + "%)";
                    ctxNetwork.fillRect(i,0,size,10);
                    console.log(i*size);
                }
            }

            function drawSecondLayer(data) {
                let size = w/data.length;
                for (let i = 0; i < data.length; i++) {
                    let curData = data[i];
                    // [0, 1] = [blanc, noir]
                    let lightVal = 100 - 100*(curData);
                    ctxNetwork.fillStyle = "hsl(0,0%," + lightVal + "%)";
                    ctxNetwork.fillRect(i*size,10,size,10);
                    console.log(i*size);
                }
            }

            function drawThirdLayer(data) {
                let size = w/data.length;
                for (let i = 0; i < data.length; i++) {
                    let curData = data[i];
                    // [0, 1] = [blanc, noir]
                    let lightVal = 100 - 100*(curData);
                    ctxNetwork.fillStyle = "hsl(0,0%," + lightVal + "%)";
                    ctxNetwork.fillRect(i*size,20,size,10);
                    console.log(i*size);
                }
            }

            function drawOutput(data) {
                let size = w/data.length;
                for (let i = 0; i < data.length; i++) {
                    let curData = data[i];
                    // [0, 1] = [blanc, noir]
                    let lightVal = 100 - 100*(curData);
                    ctxNetwork.fillStyle = "hsl(0,0%," + lightVal + "%)";
                    ctxNetwork.fillRect(i*size,30,size,10);
                    console.log(i*size);
                }
            }
        </script>

        <div class="container">
        <p>
        <br><br>
        {% for i in (0 .. 9) %}
            <h5 style="float: left; margin-right: 1em;">{{ i }} :</h5>
            <div class="progress">
                <div id="percentBar{{ i }}" class="progress-bar" role="progressbar" style="width: 0%"></div>
            </div>
            <br>
        {% endfor %}
        </p>

        <p class="lead">
        Reconnu comme : <span id="nnOut"></span>
        </p>
        </div>
    </div>


</main>

</body>
</html>